{
  "app_name": "DALL-E Image Generator",
  "description": "An application that generates images from text prompts using the DALL-E API and displays them in a gallery.",
  "required_services": [
    "openai",
    "database"
  ],
  "files": [
    {
      "path": "backend/main.py",
      "content": "\nfrom fastapi import FastAPI, HTTPException\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom openai import OpenAI\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n# Configuration\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n# Database setup\nclient = AsyncIOMotorClient(os.getenv(\"MONGO_URL\"))\ndb = client[os.getenv(\"DB_NAME\", \"app_db\")]\n\n# OpenAI setup\nopenai_client = OpenAI(api_key=os.getenv(\"OPENAI_API_KEY\"))\n\n# Models\nclass Prompt(BaseModel):\n    text: str\n\n# Endpoints\n@app.post(\"/api/generate\")\nasync def generate_image(prompt: Prompt):\n    try:\n        response = openai_client.Image.create(prompt=prompt.text)\n        image_url = response['data'][0]['url']\n        # Save to database\n        await db.images.insert_one({\"prompt\": prompt.text, \"image_url\": image_url})\n        return {\"image_url\": image_url}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@app.get(\"/api/images\")\nasync def get_images():\n    images = await db.images.find().to_list(100)\n    return images\n",
      "language": "python"
    },
    {
      "path": "backend/requirements.txt",
      "content": "fastapi\nuvicorn\nopenai\nmotor\npydantic\npython-dotenv",
      "language": "text"
    },
    {
      "path": "frontend/src/App.js",
      "content": "\nimport React, { useState, useEffect } from 'react';\n\nfunction App() {\n  const [prompt, setPrompt] = useState('');\n  const [images, setImages] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchImages();\n  }, []);\n\n  const fetchImages = async () => {\n    const response = await fetch('/api/images');\n    const data = await response.json();\n    setImages(data);\n  };\n\n  const generateImage = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/generate', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ prompt }),\n      });\n      const data = await response.json();\n      setImages((prevImages) => [...prevImages, data]);\n    } catch (error) {\n      console.error('Error generating image:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>DALL-E Image Generator</h1>\n      <input\n        type=\"text\"\n        value={prompt}\n        onChange={(e) => setPrompt(e.target.value)}\n        placeholder=\"Enter prompt\"\n      />\n      <button onClick={generateImage} disabled={loading}>\n        {loading ? 'Generating...' : 'Generate Image'}\n      </button>\n      <div className=\"gallery\">\n        {images.map((img, index) => (\n          <div key={index} className=\"image-item\">\n            <img src={img.image_url} alt={img.prompt} />\n            <p>{img.prompt}</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n",
      "language": "javascript"
    },
    {
      "path": "frontend/package.json",
      "content": "{\n  \"name\": \"dalle-image-generator\",\n  \"version\": \"1.0.0\",\n  \"description\": \"A React app to generate images using DALL-E API.\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\"\n  },\n  \"dependencies\": {\n    \"react\": \"^18.0.0\",\n    \"react-dom\": \"^18.0.0\",\n    \"react-scripts\": \"5.0.0\"\n  },\n  \"eslintConfig\": {\n    \"extends\": [\n      \"react-app\",\n      \"react-app/jest\"\n    ]\n  },\n  \"browserslist\": {\n    \"production\": [\n      \">0.2%\",\n      \"not dead\",\n      \"not op_mini all\"\n    ],\n    \"development\": [\n      \"last 1 chrome version\",\n      \"last 1 firefox version\",\n      \"last 1 safari version\"\n    ]\n  }\n}",
      "language": "json"
    },
    {
      "path": ".env.example",
      "content": "OPENAI_API_KEY=your_openai_api_key\nMONGO_URL=your_mongo_database_url\nDB_NAME=your_database_name",
      "language": "env"
    },
    {
      "path": "docker-compose.yml",
      "content": "\nversion: '3.8'\nservices:\n  backend:\n    build: ./backend\n    ports:\n      - \"8000:8000\"\n    env_file:\n      - .env\n    command: uvicorn main:app --host 0.0.0.0 --port 8000\n  frontend:\n    build: ./frontend\n    ports:\n      - \"3000:3000\"\n    depends_on:\n      - backend",
      "language": "yaml"
    },
    {
      "path": "docker-compose.yml",
      "content": "version: '3.8'\nservices:\n  backend:\n    build: ./backend\n    ports:\n      - \"8000:8000\"\n    environment:\n      - MONGO_URL=${MONGO_URL}\n      - OPENAI_API_KEY=${OPENAI_API_KEY}\n    depends_on:\n      - mongodb\n  \n  frontend:\n    build: ./frontend\n    ports:\n      - \"3000:3000\"\n    depends_on:\n      - backend\n  \n  mongodb:\n    image: mongo:latest\n    ports:\n      - \"27017:27017\"\n    volumes:\n      - mongodb_data:/data/db\n\nvolumes:\n  mongodb_data:\n",
      "language": "yaml"
    },
    {
      "path": "README.md",
      "content": "# DALL-E Image Generator\n\nAn application that generates images from text prompts using the DALL-E API and displays them in a gallery.\n\n## Quick Start\n\n```bash\n# Set up environment variables\ncp .env.example .env\n# Edit .env with your API keys\n\n# Run with Docker\ndocker-compose up\n\n# Or run manually\ncd backend && pip install -r requirements.txt && uvicorn main:app\ncd frontend && npm install && npm start\n```\n\n## Features\n- Complete backend API with FastAPI\n- React frontend with modern UI\n- Database integration\n- Ready for deployment\n\nGenerated by Digital Ninja AI Builder\n",
      "language": "markdown"
    }
  ]
}